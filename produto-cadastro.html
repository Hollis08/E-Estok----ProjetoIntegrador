<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cadastrar Produto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />
    <link rel="stylesheet" href="css/site-produto.css" />
</head>
<body>
    <div id="banner">
        <img src="img/banner.png" alt="banner" style="width: 100%; max-width: 1370px; height: auto; max-height: 200px;" />
        
    </div>
    <div class="container btn-area text-center mt-2">
        <a href="index.html" class="btn btn-primary mx-5 mt-2">Página inicial</a>
        <a href="produto-lista.html" class="btn btn-primary mx-5 mt-2">Lista de Produtos</a>
    </div>
    <div id="formCadastro" class="container mt-5">
        <form id="formProduto" method="post" action="" class="mx-auto mt-3" style="max-width: 600px;">
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="codigoProduto" class="form-label">Código do produto:</label>
                    <input type="text" id="codigoProduto" class="form-control" placeholder="Código"/>
                </div>
                <div class="col-md-6">
                    <label for="nomeProduto" class="form-label">Nome:</label>
                    <input type="text" id="nomeProduto" class="form-control" placeholder="Nome"/>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="valorProduto" class="form-label">Valor:</label>
                    <input type="number" id="valorProduto" class="form-control" placeholder="Valor"/>
                </div>
                <div class="col-md-6">
                    <label for="categoriaProduto" class="form-label">Categoria:</label>
                    <input type="text" id="categoriaProduto" class="form-control" placeholder="Categoria" />
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="validadeProduto" class="form-label">Validade:</label>
                    <input type="text" id="validadeProduto" class="form-control" placeholder="Validade"/>
                </div>
                <div class="col-md-6">
                    <label for="quantidadeProduto" class="form-label">Quantidade:</label>
                    <input type="number" id="quantidadeProduto" class="form-control" placeholder="Quantidade"/>
                </div>
            </div>

            <div class="row">
                <div class="col mb-3 text-center">
                    <button class="btn btn-primary" style="width: 30%;">Cadastrar</button>
                </div>
            </div>
        </form>
    </div>
    <script>
        document.getElementById("formProduto").addEventListener("submit", function(e) {
            e.preventDefault();

            const produto = {
                codigo: document.getElementById("codigoProduto").value,
                nome: document.getElementById("nomeProduto").value,
                valor: document.getElementById("valorProduto").value,
                categoria: document.getElementById("categoriaProduto").value,
                validade: document.getElementById("validadeProduto").value,
                quantidade: document.getElementById("quantidadeProduto").value
            };

            fetch("http://localhost:3000/produtos", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(produto)
            })
            .then(function(response) {
                if (!response.ok) throw new Error("Erro na requisição");
                return response.json();
            })
            .then(function(data) {
                alert("Produto incluido com sucesso!");
                document.getElementById("formProduto").reset();
            })
            .catch(function(error) {
                console.error("Error: ", error);
                alert("Erro ao cadastrar produto.");
            });
        });
    </script>
</body>
</html>